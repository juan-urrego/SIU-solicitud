
<p-toast></p-toast>
<p-card header="Investigadores" styleClass="p-card-shadow">

    <p-table [value]="investigadores">
        <ng-template pTemplate="header">
            <tr>                
                <th>Nombre del investigador</th>
                <th>Número de Identificacion</th>
                <th>Email</th>
                <th>Teléfono</th>
                <th>
                    <button type="button" pButton pRipple icon="pi pi-plus" (click)="openNew()"></button>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-investigador>
            <tr>                
                <td>{{investigador.nombre}}</td>
                <td>{{investigador.identificacion}}</td>
                <td>{{investigador.email}}</td>
                <td>{{investigador.telefono}}</td>
                <td>
                    <button type="button" pButton pRipple class="p-button-warning p-mr-2" icon="pi pi-pencil" (click)="openNew(investigador)"></button>
                    <button type="button" pButton pRipple class="p-button-danger p-mr-2" icon="pi pi-trash" (click)="deleteInvestigador(investigador)"></button>
                </td>
            </tr>
        </ng-template>
    </p-table>
</p-card>

<p-dialog [(visible)]="investigadorDialog" [style]="{width: '600px'}"
          header="Investigador" [modal]="true" styleClass="p-fluid">

          <ng-template pTemplate="content">
              <form [formGroup]="investigadorForm" novalidate>
                <div class="row">
                    <div class="col-12 mb-3 form-group">
        
                      <label for="nombre" class="col-form-label"><b>Nombre:</b></label>            
                      <input id="nombre" class="form-control mb-3"
                      formControlName="nombre"  rows="5" type="text"
                      [ngClass]="{'is-invalid': (investigadorForm.get('nombre').touched || investigadorForm.get('nombre').dirty) && !investigadorForm.get('nombre').valid}">
                      <span class="invalid-feedback">
                        <span *ngIf="investigadorForm.get('nombre').errors?.required">
                          Por favor ingrese la necesidad.
                        </span>
                      </span>
                      
                    </div>
                  </div>
                <div class="row">
                    <div class="col-12 mb-3 form-group">
        
                      <label for="identificacion" class="col-form-label"><b>Numero de identificacion:</b></label>            
                      <input id="identificacion" class="form-control mb-3"
                      formControlName="identificacion"  rows="5" type="text"
                      [ngClass]="{'is-invalid': (investigadorForm.get('identificacion').touched || investigadorForm.get('identificacion').dirty) && !investigadorForm.get('identificacion').valid}">
                      <span class="invalid-feedback">
                        <span *ngIf="investigadorForm.get('identificacion').errors?.required">
                          Por favor ingrese la necesidad.
                        </span>
                      </span>
                      
                    </div>
                  </div>
                <div class="row">
                    <div class="col-12 mb-3 form-group">
        
                      <label for="email" class="col-form-label"><b>Email:</b></label>            
                      <input id="email" class="form-control mb-3"
                      formControlName="email"  rows="5" type="text"
                      [ngClass]="{'is-invalid': (investigadorForm.get('email').touched || investigadorForm.get('email').dirty) && !investigadorForm.get('email').valid}">
                      <span class="invalid-feedback">
                        <span *ngIf="investigadorForm.get('email').errors?.required">
                          Por favor ingrese la necesidad.
                        </span>
                      </span>
                      
                    </div>
                  </div>
                <div class="row">
                    <div class="col-12 mb-3 form-group">
        
                      <label for="telefono" class="col-form-label"><b>Numero contacto:</b></label>            
                      <input id="telefono" class="form-control mb-3"
                      formControlName="telefono"  rows="5" type="text"
                      [ngClass]="{'is-invalid': (investigadorForm.get('telefono').touched || investigadorForm.get('telefono').dirty) && !investigadorForm.get('telefono').valid}">
                      <span class="invalid-feedback">
                        <span *ngIf="investigadorForm.get('telefono').errors?.required">
                          Por favor ingrese la necesidad.
                        </span>
                      </span>
                      
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 mb-3 form-group">
                      <label for="telefono" class="col-form-label"><b>Firma digital:</b></label> 
                      <input type="file" class="form-control mb-3" (change)="onFileSelected($event)" id="customFile" #fileInput/>   
                      
                      
                      <div *ngIf="investigadorSelected">
                        <button class="btn btn-outline-primary btn-sm"
                                (click)="toggleImage()">
                          {{loadImage ? "Hide" : "Show"}} Image
                        </button>
                           <div *ngIf="loadImage">
                             <img [src]="url" [style.height.px]="250"
                             [style.margin.px]="2" alt="firma"
                             *ngIf="loadImage && url">                    
                           </div>
                      </div>

                    
                    </div>
                  </div>
              </form>                      
          </ng-template>

          <ng-template pTemplate="footer">      
            <button pButton pRipple label="Cancel" icon="pi pi-times" 
            class="p-button-text" (click)="hideDialog()"></button>
            <button pButton 
            [disabled]="investigadorForm.get('nombre').invalid" 
            pRipple label="Save" icon="pi pi-check" class="p-button-text" 
            (click)="saveInvestigador()"></button>
            <button *ngIf="investigadorSelected" pButton pRipple 
            label="Delete" icon="pi pi-trash" class="p-button-text" 
            (click)="deleteInvestigador(investigadorSelected)"></button>
          </ng-template>

</p-dialog>
<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
